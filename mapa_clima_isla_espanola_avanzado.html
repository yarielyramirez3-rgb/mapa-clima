
<!DOCTYPE html>
<html>
<head>
    <title>Mapa Interactivo: Clima en La Isla Espa√±ola</title>
    <meta charset='utf-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <link rel='stylesheet' href='https://unpkg.com/leaflet/dist/leaflet.css' />
    <style>
        #mapid { height: 600px; width: 100%; }
        .locate-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1000;
            background: white;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        .popup-img {
            width: 220px;
            height: auto;
            display: block;
            margin-top: 5px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h2>Mapa Interactivo: Clima en La Isla Espa√±ola</h2>
    <div id='mapid'></div>
    <div class='locate-btn' onclick='locateUser()'>üìç Localizar mi posici√≥n</div>

    <script src='https://unpkg.com/leaflet/dist/leaflet.js'></script>
    <script>
        var map = L.map('mapid').setView([18.7357, -70.1627], 7);

        // Capas base
        var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
        });

        var satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles ¬© Esri ‚Äî Source: Esri, Maxar, Earthstar Geographics, and the GIS User Community'
        });

        osm.addTo(map);

        // Capas tem√°ticas
        var hurricaneRisk = L.polygon([
            [18.55, -69.90], [18.75, -69.90], [18.75, -69.70], [18.55, -69.70]
        ], {color: 'purple', fillOpacity: 0.3}).bindPopup('<b>Zona de Huracanes:</b> Alta exposici√≥n a tormentas tropicales.');

        var droughtRisk = L.polygon([
            [18.40, -71.70], [18.60, -71.70], [18.60, -71.40], [18.40, -71.40]
        ], {color: 'orange', fillOpacity: 0.3}).bindPopup('<b>Zona de Sequ√≠a:</b> Vulnerable a falta de lluvias y desertificaci√≥n.');

        var floodRisk = L.polygon([
            [18.40, -68.95], [18.60, -68.95], [18.60, -68.75], [18.40, -68.75]
        ], {color: 'blue', fillOpacity: 0.3}).bindPopup('<b>Zona de Inundaci√≥n Costera:</b> Riesgo por aumento del nivel del mar.');

        var erosionRisk = L.polygon([
            [19.70, -71.60], [19.80, -71.60], [19.80, -71.40], [19.70, -71.40]
        ], {color: 'brown', fillOpacity: 0.3}).bindPopup('<b>Zona de Erosi√≥n Costera:</b> P√©rdida de playas y h√°bitats marinos.');

        var mangroveRisk = L.polygon([
            [19.00, -69.60], [19.10, -69.60], [19.10, -69.40], [19.00, -69.40]
        ], {color: 'green', fillOpacity: 0.3}).bindPopup('<b>Zona de Manglares:</b> Ecosistemas costeros en peligro.');

        var thematicLayers = {
            "Huracanes": hurricaneRisk,
            "Sequ√≠a": droughtRisk,
            "Inundaci√≥n Costera": floodRisk,
            "Erosi√≥n Costera": erosionRisk,
            "Manglares": mangroveRisk
        };

        // Marcadores con datos reales y fotos
        var locations = [
            {coords: [18.9712, -72.2852], popup: '<b>Hait√≠:</b> Deforestaci√≥n y sequ√≠as. Temperatura media: +1.2¬∞C.<br><img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Deforestation_Haiti.jpg" class="popup-img">'},
            {coords: [19.0000, -69.5000], popup: '<b>RD:</b> Manglares en riesgo. Nivel del mar ‚Üë 3.2 mm/a√±o.<br><img src="https://upload.wikimedia.org/wikipedia/commons/6/6e/Mangrove_forest.jpg" class="popup-img">'},
            {coords: [18.4800, -71.5000], popup: '<b>Zona fronteriza:</b> Desertificaci√≥n. Precipitaci√≥n ‚Üì 15%.<br><img src="https://upload.wikimedia.org/wikipedia/commons/2/2e/Desertification.jpg" class="popup-img">'},
            {coords: [18.4500, -68.9667], popup: '<b>Punta Cana:</b> Inundaci√≥n costera. Turismo afectado.<br><img src="https://upload.wikimedia.org/wikipedia/commons/3/3e/Coastal_flooding.jpg" class="popup-img">'},
            {coords: [19.2000, -70.5000], popup: '<b>Santiago:</b> Huracanes frecuentes. Da√±os agr√≠colas.<br><img src="https://upload.wikimedia.org/wikipedia/commons/8/8f/Hurricane_damage.jpg" class="popup-img">'},
            {coords: [18.5500, -69.3000], popup: '<b>Santo Domingo:</b> Inundaciones urbanas. P√©rdida econ√≥mica: $50M.<br><img src="https://upload.wikimedia.org/wikipedia/commons/5/5f/Flooding_in_city.jpg" class="popup-img">'},
            {coords: [19.7500, -71.5000], popup: '<b>Puerto Plata:</b> Erosi√≥n costera. Playas reducidas 20%.<br><img src="https://upload.wikimedia.org/wikipedia/commons/7/7d/Coastal_erosion.jpg" class="popup-img">'},
            {coords: [18.3000, -72.4000], popup: '<b>Sur de Hait√≠:</b> Huracanes categor√≠a 4-5.<br><img src="https://upload.wikimedia.org/wikipedia/commons/9/9f/Hurricane_damage_coast.jpg" class="popup-img">'},
            {coords: [19.4500, -70.7000], popup: '<b>La Vega:</b> Sequ√≠a prolongada. Agricultura en riesgo.<br><img src="https://upload.wikimedia.org/wikipedia/commons/2/2e/Drought_field.jpg" class="popup-img">'},
            {coords: [18.8000, -71.0000], popup: '<b>Barahona:</b> Alta vulnerabilidad clim√°tica.<br><img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Deforestation_Haiti.jpg" class="popup-img">'},
            {coords: [19.1000, -69.9000], popup: '<b>El Seibo:</b> Riesgo de huracanes y p√©rdida de cultivos.<br><img src="https://upload.wikimedia.org/wikipedia/commons/8/8f/Hurricane_damage.jpg" class="popup-img">'},
            {coords: [18.6000, -72.0000], popup: '<b>Jacmel:</b> Inundaciones y deslizamientos.<br><img src="https://upload.wikimedia.org/wikipedia/commons/5/5f/Flooding_in_city.jpg" class="popup-img">'}
        ];

        locations.forEach(function(loc) {
            L.marker(loc.coords).addTo(map)
                .bindPopup(loc.popup);
        });

        var baseMaps = {
            "Mapa Callejero": osm,
            "Im√°genes Satelitales": satellite
        };

        L.control.layers(baseMaps, thematicLayers).addTo(map);

        // Bot√≥n de geolocalizaci√≥n
        function locateUser() {
            map.locate({setView: true, maxZoom: 12});
        }

        map.on('locationfound', function(e) {
            L.marker(e.latlng).addTo(map)
                .bindPopup('üìç Est√°s aqu√≠').openPopup();
        });

        map.on('locationerror', function() {
            alert('No se pudo obtener tu ubicaci√≥n. Verifica permisos de GPS.');
        });
    </script>
</body>
</html>
